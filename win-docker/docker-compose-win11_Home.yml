services:
  windows2:
    image: linuxwelt/windocker:6.0
    container_name: windows11Home
    environment:
      LANGUAGE: "German"
      VERSION: "11"
      REGION: "de-DE"
      KEYBOARD: "de-DE"
      DISK_SIZE: "256G"
      USERNAME: "[USER]"
      PASSWORD: "[PASSWORD]"
      RAM_SIZE: "4G"
      CPU_CORES: "2"
      HOST_PORTS: "5902,5900"
      ARGUMENTS: "-vga qxl -spice port=5902,addr=0.0.0.0,disable-ticketing -chardev spicevmc,id=vdagent,debug=0,name=vdagent,clipboard=on,mouse=off -device virtio-serial-pci -device virtserialport,chardev=vdagent,id=vdagent,name=com.redhat.spice.0 -device ich9-intel-hda -device hda-output -audio spice"
      
    volumes:
    # Eigene ISO-Datei für die Installation verwenden
    # Fehlt diese Zeile, wird die ISO-Datei von Microsoft heruntergeladen
    # Kopieren Sie die eigene ISO Datei nach /opt/win-docker/ISO/
    - /opt/win-docker/ISO/Win11_24H2_German_x64.iso:/custom.iso
    # Ordner für den Datenaustausch im Gast über Netzwerk -> host.lan
    - /opt/win-docker/win-docker-share:/shared
    # Der Speicherort der Windows-Installation
    - /opt/win-docker/storage/win11-Home:/storage
    # Script nach der Installation ausführen
    # Zur automatischen installation von virtio-win-guest-tools.exe
    # Optimiert die Leistung des Gastsystems und ermöglicht die gemeinsame Nutzung der Zwischenablage
    - /opt/win-docker/ISO/OEM:/oem
    # Installiere Home-Edition
    - /opt/win-docker/ISO/custom_win11x64_Home.xml:/run/assets/win11x64.xml
    devices:
      - /dev/kvm
      - /dev/net/tun
    cap_add:
      - NET_ADMIN
    ports:
      - 8006:8006 #noVNC
      - 3389:3389/tcp # RDP
      - 3389:3389/udp # RDP
      - 5902:5902/tcp # Spice
      - 5902:5902/udp # Spice
      - 5900:5900 # VNC
    stop_grace_period: 2m
